{% extends 'common/base.html' %}

{% block content %}
<div class="clearfix">

</div>
<section>
    <div class="container pt-5">
        <h2>Rooms</h2>
        <ul class="d-flex justify-content-start ">
            <li class="p-2 mr-1"><a id="standard-room" href="#">Standard</a></li>
            <li class="p-2 mr-1"><a href="">Delux</a></li>
            <li class="p-2 mr-1"><a href="">Suit</a></li>
            <li class="p-2 mr-1"><a href="">Apartment</a></li>
        </ul>

        <div>
            <div id="rooms" class="row row-cols-1 row-cols-md-3 g-4">
                {% for room in rooms %}
                <div class="col">
                    <div class="card h-100">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">{{room.style}}</h5>
                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                                additional content. This content is a little bit longer.</p>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Status: {{room.room_status}}</li>
                            <li class="list-group-item">Price: {{room.booking_price}}</li>
                        </ul>
                        <div class="card-footer">
                            <small class="text-muted">Last updated 3 mins ago</small>
                        </div>
                    </div>
                </div>
                {% endfor %}


            </div>
        </div>
    </div>
</section>
{% endblock content %}

{% block javascript %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    const renderStandardRooms = (resp) => {
        const roomsElm = document.getElementById("rooms")


        const standardRooms = resp.standard_rooms
        console.log('ddddd')
        console.log(standardRooms)
        roomsElm.innerHTML = ""
        standardRooms.forEach((room, idx) => {
            console.log('I am inside of for loop.............')
            const divElm = document.createElement('div')
            divElm.classList.add("col")
            divElm.innerHTML = `
                    <div class="card h-100">
                        <img src="..." class="card-img-top" alt="...">
                        <div class="card-body">
                            <h5 class="card-title">${room.style}</h5>
                            <p class="card-text">This is a wider card with supporting text below as a natural lead-in to
                                additional content. This content is a little bit longer.</p>
                        </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Status: ${room.room_status}</li>
                            <li class="list-group-item">Price: ${room.booking_price}</li>
                        </ul>
                        <div class="card-footer">
                            <small class="text-muted">Last updated 3 mins ago</small>
                        </div>
                    </div>
                `
            roomsElm.appendChild(divElm)
        }, null)




    }

    function get_standard_rooms() {
        $.get("http://127.0.0.1:8000/hms/rooms/standard", (resp) => renderStandardRooms(resp))
    }


    const standardRoomElm = document.getElementById("standard-room")
    standardRoomElm.addEventListener('click', get_standard_rooms)

</script>
{% endblock javascript %}